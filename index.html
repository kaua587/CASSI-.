<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Para Cassi üå∑</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
    }
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      font-family: "Segoe UI", sans-serif;
      background-color: #ffeef3;
      background-image: url('https://www.transparenttextures.com/patterns/pink-paper.png');
      color: #3c3c3c;
      padding: 20px;
      overflow-x: hidden;
      position: relative;
    }
    #quiz {
      max-width: 500px;
      width: 100%;
      position: relative;
      z-index: 2;
      transition: opacity 0.8s ease;
    }
    .quiz-step {
      display: none;
      animation: fadeIn 0.5s ease-in-out;
    }
    .quiz-step.active {
      display: block;
    }
    .question {
      font-size: 1.4em;
      margin-bottom: 20px;
      text-align: center;
    }
    .options button {
      position: relative;
      display: block;
      width: 100%;
      margin: 10px 0;
      padding: 14px;
      font-size: 1em;
      border: none;
      border-radius: 16px;
      background: #ffeef3;
      color: #3c3c3c;
      transition: background 0.3s, transform 0.1s;
      overflow: hidden;
      box-shadow: 0 3px 8px rgba(255, 180, 200, 0.2);
      z-index: 2;
    }
    .options button:hover {
      background: #ffd6e5;
    }
    .options button:active {
      transform: scale(0.97);
    }
    .heart {
      position: absolute;
      color: #ff9eb5;
      font-size: 1.2em;
      animation: floatUp 1s ease-out forwards;
      pointer-events: none;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes floatUp {
      0% { opacity: 1; transform: translateY(0) scale(1); }
      100% { opacity: 0; transform: translateY(-40px) scale(1.5); }
    }
    .final {
      font-size: 1.2em;
      margin-top: 40px;
      background: #fff0f5;
      padding: 24px;
      border-radius: 20px;
      text-align: center;
      line-height: 1.5em;
      animation: fadeIn 1s ease-in-out;
      box-shadow: 0 4px 12px rgba(255, 180, 200, 0.2);
    }
    .falling-heart {
      position: fixed;
      top: -20px;
      font-size: 1.2em;
      color: #ffb6c1;
      animation: fall 6s linear infinite;
      z-index: 0;
      pointer-events: none;
    }
    @keyframes fall {
      0% { transform: translateY(0) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
    }
    .envelope {
      width: 200px;
      height: 140px;
      background: #fff;
      border: 2px solid #ffb6c1;
      border-radius: 10px;
      position: relative;
      margin: 20px auto 0;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(255, 182, 193, 0.4);
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 1.1em;
      text-align: center;
      padding: 10px;
      transition: transform 0.6s;
      backface-visibility: hidden;
      z-index: 2;
    }
    .envelope.fade-in {
      animation: fadeInEnvelope 1s ease forwards;
    }
    @keyframes fadeInEnvelope {
      0% { opacity: 0; transform: translateY(30px) scale(0.9); }
      100% { opacity: 1; transform: translateY(0) scale(1); }
    }
    .envelope.opened {
      animation: openEnvelope 1s ease forwards;
      background: #fff0f5;
    }
    @keyframes openEnvelope {
      0% { transform: scale(1) rotate(0deg); }
      30% { transform: scale(1.1) rotate(-3deg); }
      60% { transform: scale(1) rotate(3deg); }
      100% { transform: scale(1.05) rotateX(180deg); }
    }
    .message {
      display: none;
      opacity: 0;
    }
    .message.show {
      display: block;
      animation: fadeSlideUp 1s ease-in-out forwards;
      padding: 20px;
      background: #fff0f5;
      border-radius: 20px;
      box-shadow: 0 4px 12px rgba(255, 180, 200, 0.2);
      text-align: center;
      font-size: 1.2em;
      z-index: 2;
      margin-top: -120px;
    }
    @keyframes fadeSlideUp {
      0% { opacity: 0; transform: translateY(40px) scale(0.95); }
      100% { opacity: 1; transform: translateY(0) scale(1); }
    }
    .emoji-rise {
      position: fixed;
      bottom: -20px;
      font-size: 1.4em;
      animation: riseUp 3s ease-in-out forwards;
      pointer-events: none;
      z-index: 10;
    }
    @keyframes riseUp {
      0% { transform: translateY(0); opacity: 1; }
      100% { transform: translateY(-150px); opacity: 0; }
    }
  </style>
</head>
<body>
  <audio autoplay loop>
    <source src="https://cdn.pixabay.com/download/audio/2022/10/25/audio_e66cf8f37d.mp3?filename=romantic-piano-loop-121624.mp3" type="audio/mpeg">
  </audio>
  <div id="quiz">
    <!-- perguntas -->
    <div class="quiz-step active" data-step="1">
      <div class="question">1. O que aquece seu cora√ß√£o de verdade? ‚ú®</div>
      <div class="options">
        <button data-value="mensagem">Uma mensagem do nada s√≥ pra me lembrar que sou especial</button>
        <button data-value="abraco">Um abra√ßo sincero quando eu n√£o pe√ßo</button>
        <button data-value="escuta">Algu√©m que escuta de verdade</button>
      </div>
    </div>
    <div class="quiz-step" data-step="2">
      <div class="question">2. Em um dia dif√≠cil, o que mais te conforta? ‚òÅÔ∏è</div>
      <div class="options">
        <button data-value="lembranca">Saber que algu√©m pensou em mim mesmo de longe</button>
        <button data-value="silencio">Sil√™ncio com algu√©m que entende sem precisar falar</button>
        <button data-value="riso">Uma frase boba que me fa√ßa rir</button>
      </div>
    </div>
    <div class="quiz-step" data-step="3">
      <div class="question">3. Quando voc√™ se sente mais voc√™? üå∑</div>
      <div class="options">
        <button data-value="vulneravel">Quando posso ser vulner√°vel sem medo</button>
        <button data-value="detalhes">Quando algu√©m repara em detalhes que ningu√©m v√™</button>
        <button data-value="leve">Quando t√¥ rindo sem motivo, leve</button>
      </div>
    </div>
    <!-- carta -->
    <div id="envelopeContainer" style="display:none; text-align:center; margin-top: 20px;">
      <div class="envelope" onclick="openEnvelope()">
        üíå Voc√™ recebeu uma carta...
      </div>
      <div id="messageText" class="message"></div>
    </div>
  </div>
  <script>
    const quiz = document.getElementById('quiz');
    const steps = document.querySelectorAll('.quiz-step');
    const envelopeContainer = document.getElementById('envelopeContainer');
    const messageText = document.getElementById('messageText');
    let stepIndex = 0;
    let answers = [];

    document.querySelectorAll('.options button').forEach(button => {
      button.addEventListener('click', () => {
        answers.push(button.getAttribute('data-value'));
        steps[stepIndex].classList.remove('active');
        stepIndex++;
        if (stepIndex < steps.length) {
          steps[stepIndex].classList.add('active');
        } else {
          envelopeContainer.style.display = 'block';
          setTimeout(() => {
            document.querySelector('.envelope').classList.add('fade-in');
          }, 50);
        }
        createHeart(button);
      });
    });

    function createHeart(btn) {
      const heart = document.createElement('div');
      heart.classList.add('heart');
      heart.textContent = 'üíñ';
      heart.style.left = Math.random() * 80 + '%';
      btn.appendChild(heart);
      setTimeout(() => heart.remove(), 1000);
    }

    function createEmojiRise() {
      const emoji = document.createElement('div');
      emoji.classList.add('emoji-rise');
      emoji.style.left = Math.random() * window.innerWidth + 'px';
      emoji.textContent = ['üå∏','üí´','üå∑','üíì'][Math.floor(Math.random() * 4)];
      document.body.appendChild(emoji);
      setTimeout(() => emoji.remove(), 3000);
    }

    function openEnvelope() {
      document.querySelector('.envelope').classList.add('opened');
      setTimeout(() => {
        quiz.style.opacity = '0';
        setTimeout(() => {
          quiz.style.display = 'none';
          messageText.innerHTML = getFinalMessage();
          messageText.classList.add('show');
          const interval = setInterval(createEmojiRise, 300);
          setTimeout(() => clearInterval(interval), 4000);
        }, 1000);
      }, 1000);
    }

    function getFinalMessage() {
      const custom = {
        'mensagem|lembranca|vulneravel': 'Cassi, cada pedacinho seu que confia e se abre assim, me d√° vontade de cuidar, ouvir e nunca esquecer. üíó',
        'abraco|riso|leve': 'Voc√™, leve e rindo √† toa, √© minha vis√£o favorita do mundo. Espero sempre te dar motivos pra sorrir. ‚ú®',
        'escuta|silencio|detalhes': 'Voc√™ √© feita de sutilezas lindas. E eu amo cada uma delas. üå∑'
      };
      const key = answers.join('|');
      if (custom[key]) return custom[key];
      const mensagens = [
        "Voc√™ √© um pedacinho de calma no meu dia, Cassi. üíñ",
        "S√≥ queria que soubesse que voc√™ deixa tudo mais leve. ‚ú®",
        "Se eu pudesse escolher de novo, escolheria te encontrar sempre. üå∑",
        "Tem algo em voc√™ que simplesmente faz o mundo parecer mais bonito. üíå"
      ];
      return mensagens[Math.floor(Math.random() * mensagens.length)];
    }
  </script>
</body>
</html>
